"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/../../dist/chunk-7Z4WROQP.js":
/*!************************************!*\
  !*** ../../dist/chunk-7Z4WROQP.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFlagsClient: () => (/* binding */ createFlagsClient)\n/* harmony export */ });\n/* harmony import */ var _chunk_B67M3F4I_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-B67M3F4I.js */ \"(middleware)/../../dist/chunk-B67M3F4I.js\");\n/* harmony import */ var _vercel_edge_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/edge-config */ \"(middleware)/../../node_modules/@vercel/edge-config/dist/index.js\");\n\n// src/core/client.ts\n\nfunction createFetchConnection(opts) {\n    const base = opts.edgeConfigId ? `https://api.vercel.com/v1/edge-config/${opts.edgeConfigId}` : `https://api.vercel.com/v1/edge-config`;\n    const token = opts.edgeConfigToken ?? process.env.VERCEL_API_TOKEN ?? \"\";\n    async function getItem(key) {\n        const search = new URLSearchParams();\n        search.set(\"keys\", JSON.stringify([\n            key\n        ]));\n        if (opts.teamId ?? process.env.VERCEL_TEAM_ID) search.set(\"teamId\", opts.teamId ?? process.env.VERCEL_TEAM_ID);\n        const url = `${base}/items?${search.toString()}`;\n        const res = await fetch(url, {\n            headers: token ? {\n                Authorization: `Bearer ${token}`\n            } : void 0,\n            cache: \"no-store\"\n        });\n        if (!res.ok) return null;\n        const data = await res.json();\n        const found = data?.find((i)=>i.key === key)?.value;\n        return found ?? null;\n    }\n    async function getMany(keys) {\n        if (keys.length === 0) return {};\n        const search = new URLSearchParams();\n        search.set(\"keys\", JSON.stringify(keys));\n        if (opts.teamId ?? process.env.VERCEL_TEAM_ID) search.set(\"teamId\", opts.teamId ?? process.env.VERCEL_TEAM_ID);\n        const url = `${base}/items?${search.toString()}`;\n        const res = await fetch(url, {\n            headers: token ? {\n                Authorization: `Bearer ${token}`\n            } : void 0,\n            cache: \"no-store\"\n        });\n        if (!res.ok) return {};\n        const data = await res.json();\n        const out = {};\n        for (const k of keys)out[k] = null;\n        for (const it of data ?? []){\n            if (keys.includes(it.key)) {\n                out[it.key] = it.value;\n            }\n        }\n        return out;\n    }\n    return {\n        getItem,\n        getMany\n    };\n}\nfunction createFlagsClient(options = {}) {\n    const namespace = options.namespace ?? \"flag\";\n    const env = (0,_chunk_B67M3F4I_js__WEBPACK_IMPORTED_MODULE_0__.resolveEnvironment)(options.env ?? null);\n    const edgeConfigId = options.edgeConfigId ?? process.env.EDGE_CONFIG_ID;\n    const edgeConfigConnection = process.env.EDGE_CONFIG;\n    const edgeConfig = options.connection ? null : edgeConfigConnection ? (0,_vercel_edge_config__WEBPACK_IMPORTED_MODULE_1__.createClient)(edgeConfigConnection) : null;\n    let cache = null;\n    const cacheExpiry = 3e4;\n    let lastFetch = 0;\n    async function ensureCache() {\n        const now = Date.now();\n        const cacheAge = cache ? now - lastFetch : -1;\n        console.log(`cache check: age=${cacheAge}ms expiry=${cacheExpiry}ms hasCache=${!!cache} willFetch=${!cache || cacheAge >= cacheExpiry}`);\n        if (cache && cacheAge < cacheExpiry) return;\n        try {\n            if (edgeConfig) {\n                console.log(`fetching via SDK: env=${env}`);\n                const prefix2 = `${namespace}__${env}__`;\n                const allItems = await edgeConfig.getAll();\n                console.log(`SDK success: total=${Object.keys(allItems ?? {}).length} items`);\n                const newCache2 = {};\n                for (const [key, value] of Object.entries(allItems ?? {})){\n                    if (key.startsWith(prefix2)) {\n                        const shortKey = key.slice(prefix2.length);\n                        newCache2[shortKey] = value;\n                        console.log(`cached via SDK: ${shortKey} = ${JSON.stringify(value)}`);\n                    }\n                }\n                cache = newCache2;\n                lastFetch = now;\n                console.log(`SDK cache updated: ${Object.keys(cache).length} flags`);\n                return;\n            }\n            console.log(`falling back to REST API`);\n            const connection = createFetchConnection({\n                edgeConfigId,\n                edgeConfigToken: options.edgeConfigToken ?? process.env.VERCEL_API_TOKEN,\n                teamId: options.teamId ?? process.env.VERCEL_TEAM_ID\n            });\n            const prefix = `${namespace}__${env}__`;\n            const keys = Object.keys(cache ?? {}).map((k)=>`${prefix}${k}`);\n            if (keys.length === 0) {\n                cache = {};\n                lastFetch = now;\n                return;\n            }\n            const values = await connection.getMany(keys);\n            const newCache = {};\n            for (const [fullKey, value] of Object.entries(values)){\n                if (fullKey.startsWith(prefix)) {\n                    const shortKey = fullKey.slice(prefix.length);\n                    newCache[shortKey] = value;\n                }\n            }\n            cache = newCache;\n            lastFetch = now;\n            console.log(`REST cache updated: ${Object.keys(cache).length} flags`);\n        } catch (error) {\n            console.log(`fetch error:`, error);\n            if (!cache) cache = {};\n            if (cache) lastFetch = now;\n        }\n    }\n    async function getBoolean(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"boolean\") return v;\n        if (typeof v === \"string\") {\n            if (v === \"true\") return true;\n            if (v === \"false\") return false;\n        }\n        return null;\n    }\n    async function getString(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"string\") return v;\n        return null;\n    }\n    async function getNumber(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"number\") return v;\n        if (typeof v === \"string\") {\n            const n = Number(v);\n            return Number.isFinite(n) ? n : null;\n        }\n        return null;\n    }\n    async function getJSON(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"object\") return v;\n        if (typeof v === \"string\") {\n            try {\n                return JSON.parse(v);\n            } catch  {\n                return null;\n            }\n        }\n        return null;\n    }\n    async function getMany(keys) {\n        await ensureCache();\n        const out = {};\n        for (const k of keys){\n            out[k] = cache?.[k] ?? null;\n        }\n        return out;\n    }\n    return {\n        getBoolean,\n        getString,\n        getNumber,\n        getJSON,\n        getMany\n    };\n}\n //# sourceMappingURL=chunk-7Z4WROQP.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4uLy4uL2Rpc3QvY2h1bmstN1o0V1JPUVAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFNkI7QUFFN0IsU0FBUyxzQkFBc0IsTUFBa0c7SUFDL0gsTUFBTSxPQUFPLEtBQUssZUFDZCx5Q0FBeUMsS0FBSyxZQUFZLEtBQzFEO0lBQ0osTUFBTSxRQUFRLEtBQUssbUJBQW1CLFFBQVEsSUFBSSxvQkFBb0I7SUFDdEUsZUFBZSxRQUFRLEtBQStCO1FBQ3BELE1BQU0sU0FBUyxJQUFJLGdCQUFnQjtRQUNuQyxPQUFPLElBQUksUUFBUSxLQUFLLFVBQVU7WUFBQyxHQUFHO1NBQUMsQ0FBQztRQUN4QyxJQUFJLEtBQUssVUFBVSxRQUFRLElBQUksZUFBZ0IsUUFBTyxJQUFJLFVBQVcsS0FBSyxVQUFVLFFBQVEsSUFBSSxjQUF5QjtRQUN6SCxNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsT0FBTyxTQUFTLENBQUM7UUFDOUMsTUFBTSxNQUFNLE1BQU0sTUFBTSxLQUFLO1lBQzNCLFNBQVMsUUFBUTtnQkFBRSxlQUFlLFVBQVUsS0FBSztZQUFHLElBQUk7WUFDeEQsT0FBTztRQUNULENBQUM7UUFDRCxJQUFJLENBQUMsSUFBSSxHQUFJLFFBQU87UUFDcEIsTUFBTSxPQUFRLE1BQU0sSUFBSSxLQUFLO1FBQzdCLE1BQU0sUUFBUSxNQUFNLEtBQUssQ0FBQyxJQUFNLEVBQUUsUUFBUSxHQUFHLEdBQUc7UUFDaEQsT0FBTyxTQUFTO0lBQ2xCO0lBQ0EsZUFBZSxRQUFRLE1BQWtEO1FBQ3ZFLElBQUksS0FBSyxXQUFXLEVBQUcsUUFBTyxDQUFDO1FBQy9CLE1BQU0sU0FBUyxJQUFJLGdCQUFnQjtRQUNuQyxPQUFPLElBQUksUUFBUSxLQUFLLFVBQVUsSUFBSSxDQUFDO1FBQ3ZDLElBQUksS0FBSyxVQUFVLFFBQVEsSUFBSSxlQUFnQixRQUFPLElBQUksVUFBVyxLQUFLLFVBQVUsUUFBUSxJQUFJLGNBQXlCO1FBQ3pILE1BQU0sTUFBTSxHQUFHLElBQUks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QztRQUNBLE9BQU87SUFDVDtJQUVBLGVBQWUsUUFBcUIsS0FBZ0M7UUFDbEUsTUFBTSxZQUFZO1FBQ2xCLE1BQU0sSUFBSSxRQUFRLEdBQUc7UUFDckIsSUFBSSxNQUFNLFFBQVEsTUFBTSxPQUFXLFFBQU87UUFDMUMsSUFBSSxPQUFPLE1BQU0sU0FBVSxRQUFPO1FBQ2xDLElBQUksT0FBTyxNQUFNLFVBQVU7WUFDekIsSUFBSTtnQkFDRixPQUFPLEtBQUssTUFBTSxDQUFDO1lBQ3JCLFNBQVE7Z0JBQ04sT0FBTztZQUNUO1FBQ0Y7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxlQUFlLFFBQVEsTUFBa0Q7UUFDdkUsTUFBTSxZQUFZO1FBQ2xCLE1BQU0sTUFBK0IsQ0FBQztRQUN0QyxXQUFXLEtBQUssS0FBTTtZQUNwQixJQUFJLENBQUMsSUFBSSxRQUFRLENBQUMsS0FBSztRQUN6QjtRQUNBLE9BQU87SUFDVDtJQUVBLE9BQU87UUFBRTtRQUFZO1FBQVc7UUFBVztRQUFTO0lBQVE7QUFDOUQiLCJzb3VyY2VzIjpbIi9Vc2Vycy95YWhvcmJhcmtvdXNraS90aGVuZXR3b3JrL2VkZ2UtZmVhdHVyZS1mbGFncy9leGFtcGxlcy9zcmMvY29yZS9jbGllbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVzb2x2ZUVudmlyb25tZW50LCBmb3JtYXROYW1lc3BhY2VkS2V5IH0gZnJvbSBcIi4uL3V0aWxzL2VudlwiO1xuaW1wb3J0IHR5cGUgeyBFZGdlQ29uZmlnQ29ubmVjdGlvbiwgRmxhZ3NDbGllbnRPcHRpb25zIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAdmVyY2VsL2VkZ2UtY29uZmlnXCI7XG5cbmZ1bmN0aW9uIGNyZWF0ZUZldGNoQ29ubmVjdGlvbihvcHRzOiB7IGVkZ2VDb25maWdJZD86IHN0cmluZzsgZWRnZUNvbmZpZ1Rva2VuPzogc3RyaW5nOyB0ZWFtSWQ/OiBzdHJpbmcgfSk6IEVkZ2VDb25maWdDb25uZWN0aW9uIHtcbiAgY29uc3QgYmFzZSA9IG9wdHMuZWRnZUNvbmZpZ0lkXG4gICAgPyBgaHR0cHM6Ly9hcGkudmVyY2VsLmNvbS92MS9lZGdlLWNvbmZpZy8ke29wdHMuZWRnZUNvbmZpZ0lkfWBcbiAgICA6IGBodHRwczovL2FwaS52ZXJjZWwuY29tL3YxL2VkZ2UtY29uZmlnYDtcbiAgY29uc3QgdG9rZW4gPSBvcHRzLmVkZ2VDb25maWdUb2tlbiA/PyBwcm9jZXNzLmVudi5WRVJDRUxfQVBJX1RPS0VOID8/IFwiXCI7XG4gIGFzeW5jIGZ1bmN0aW9uIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICBjb25zdCBzZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgc2VhcmNoLnNldChcImtleXNcIiwgSlNPTi5zdHJpbmdpZnkoW2tleV0pKTtcbiAgICBpZiAob3B0cy50ZWFtSWQgPz8gcHJvY2Vzcy5lbnYuVkVSQ0VMX1RFQU1fSUQpIHNlYXJjaC5zZXQoXCJ0ZWFtSWRcIiwgKG9wdHMudGVhbUlkID8/IHByb2Nlc3MuZW52LlZFUkNFTF9URUFNX0lEKSBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHVybCA9IGAke2Jhc2V9L2l0ZW1zPyR7c2VhcmNoLnRvU3RyaW5nKCl9YDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIGhlYWRlcnM6IHRva2VuID8geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9IDogdW5kZWZpbmVkLFxuICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIlxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiB1bmtub3duIH0+O1xuICAgIGNvbnN0IGZvdW5kID0gZGF0YT8uZmluZCgoaSkgPT4gaS5rZXkgPT09IGtleSk/LnZhbHVlO1xuICAgIHJldHVybiBmb3VuZCA/PyBudWxsO1xuICB9XG4gIGFzeW5jIGZ1bmN0aW9uIGdldE1hbnkoa2V5czogc3RyaW5nW10pOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB7XG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSByZXR1cm4ge307XG4gICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgIHNlYXJjaC5zZXQoXCJrZXlzXCIsIEpTT04uc3RyaW5naWZ5KGtleXMpKTtcbiAgICBpZiAob3B0cy50ZWFtSWQgPz8gcHJvY2Vzcy5lbnYuVkVSQ0VMX1RFQU1fSUQpIHNlYXJjaC5zZXQoXCJ0ZWFtSWRcIiwgKG9wdHMudGVhbUlkID8/IHByb2Nlc3MuZW52LlZFUkNFTF9URUFNX0lEKSBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHVybCA9IGAke2Jhc2V9L2l0ZW1zPyR7c2VhcmNoLnRvU3RyaW5nKCl9YDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIGhlYWRlcnM6IHRva2VuID8geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9IDogdW5kZWZpbmVkLFxuICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIlxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSByZXR1cm4ge307XG4gICAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogdW5rbm93biB9PjtcbiAgICBjb25zdCBvdXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gICAgZm9yIChjb25zdCBrIG9mIGtleXMpIG91dFtrXSA9IG51bGw7XG4gICAgZm9yIChjb25zdCBpdCBvZiBkYXRhID8/IFtdKSB7XG4gICAgICBpZiAoa2V5cy5pbmNsdWRlcyhpdC5rZXkpKSB7XG4gICAgICAgIG91dFtpdC5rZXldID0gaXQudmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgcmV0dXJuIHsgZ2V0SXRlbSwgZ2V0TWFueSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRmxhZ3NDbGllbnQob3B0aW9uczogRmxhZ3NDbGllbnRPcHRpb25zID0ge30pIHtcbiAgY29uc3QgbmFtZXNwYWNlID0gb3B0aW9ucy5uYW1lc3BhY2UgPz8gXCJmbGFnXCI7XG4gIGNvbnN0IGVudiA9IHJlc29sdmVFbnZpcm9ubWVudChvcHRpb25zLmVudiA/PyBudWxsKTtcbiAgY29uc3QgZWRnZUNvbmZpZ0lkID0gb3B0aW9ucy5lZGdlQ29uZmlnSWQgPz8gcHJvY2Vzcy5lbnYuRURHRV9DT05GSUdfSUQ7XG4gIGNvbnN0IGVkZ2VDb25maWdDb25uZWN0aW9uID0gcHJvY2Vzcy5lbnYuRURHRV9DT05GSUc7XG4gIFxuICBjb25zdCBlZGdlQ29uZmlnID0gb3B0aW9ucy5jb25uZWN0aW9uID8gbnVsbCA6IChlZGdlQ29uZmlnQ29ubmVjdGlvbiA/IGNyZWF0ZUNsaWVudChlZGdlQ29uZmlnQ29ubmVjdGlvbikgOiBudWxsKTtcblxuICBsZXQgY2FjaGU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCA9IG51bGw7XG4gIGNvbnN0IGNhY2hlRXhwaXJ5ID0gMzAwMDA7XG4gIGxldCBsYXN0RmV0Y2ggPSAwO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUNhY2hlKCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgY2FjaGVBZ2UgPSBjYWNoZSA/IG5vdyAtIGxhc3RGZXRjaCA6IC0xO1xuICAgIGNvbnNvbGUubG9nKGBjYWNoZSBjaGVjazogYWdlPSR7Y2FjaGVBZ2V9bXMgZXhwaXJ5PSR7Y2FjaGVFeHBpcnl9bXMgaGFzQ2FjaGU9JHshIWNhY2hlfSB3aWxsRmV0Y2g9JHshY2FjaGUgfHwgY2FjaGVBZ2UgPj0gY2FjaGVFeHBpcnl9YCk7XG4gICAgaWYgKGNhY2hlICYmIGNhY2hlQWdlIDwgY2FjaGVFeHBpcnkpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKGVkZ2VDb25maWcpIHtcbiAgICAgICAgY29uc29sZS5sb2coYGZldGNoaW5nIHZpYSBTREs6IGVudj0ke2Vudn1gKTtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gYCR7bmFtZXNwYWNlfV9fJHtlbnZ9X19gO1xuICAgICAgICBjb25zdCBhbGxJdGVtcyA9IGF3YWl0IGVkZ2VDb25maWcuZ2V0QWxsKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBTREsgc3VjY2VzczogdG90YWw9JHtPYmplY3Qua2V5cyhhbGxJdGVtcyA/PyB7fSkubGVuZ3RofSBpdGVtc2ApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV3Q2FjaGU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFsbEl0ZW1zID8/IHt9KSkge1xuICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICAgICAgICBjb25zdCBzaG9ydEtleSA9IGtleS5zbGljZShwcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgICAgIG5ld0NhY2hlW3Nob3J0S2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYGNhY2hlZCB2aWEgU0RLOiAke3Nob3J0S2V5fSA9ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2FjaGUgPSBuZXdDYWNoZTtcbiAgICAgICAgbGFzdEZldGNoID0gbm93O1xuICAgICAgICBjb25zb2xlLmxvZyhgU0RLIGNhY2hlIHVwZGF0ZWQ6ICR7T2JqZWN0LmtleXMoY2FjaGUpLmxlbmd0aH0gZmxhZ3NgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgZmFsbGluZyBiYWNrIHRvIFJFU1QgQVBJYCk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gY3JlYXRlRmV0Y2hDb25uZWN0aW9uKHtcbiAgICAgICAgZWRnZUNvbmZpZ0lkLFxuICAgICAgICBlZGdlQ29uZmlnVG9rZW46IG9wdGlvbnMuZWRnZUNvbmZpZ1Rva2VuID8/IHByb2Nlc3MuZW52LlZFUkNFTF9BUElfVE9LRU4sXG4gICAgICAgIHRlYW1JZDogb3B0aW9ucy50ZWFtSWQgPz8gcHJvY2Vzcy5lbnYuVkVSQ0VMX1RFQU1fSURcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBwcmVmaXggPSBgJHtuYW1lc3BhY2V9X18ke2Vudn1fX2A7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY2FjaGUgPz8ge30pLm1hcChrID0+IGAke3ByZWZpeH0ke2t9YCk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY2FjaGUgPSB7fTtcbiAgICAgICAgbGFzdEZldGNoID0gbm93O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IGNvbm5lY3Rpb24uZ2V0TWFueShrZXlzKTtcbiAgICAgIGNvbnN0IG5ld0NhY2hlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuICAgICAgZm9yIChjb25zdCBbZnVsbEtleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlcykpIHtcbiAgICAgICAgaWYgKGZ1bGxLZXkuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICAgICAgY29uc3Qgc2hvcnRLZXkgPSBmdWxsS2V5LnNsaWNlKHByZWZpeC5sZW5ndGgpO1xuICAgICAgICAgIG5ld0NhY2hlW3Nob3J0S2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNhY2hlID0gbmV3Q2FjaGU7XG4gICAgICBsYXN0RmV0Y2ggPSBub3c7XG4gICAgICBjb25zb2xlLmxvZyhgUkVTVCBjYWNoZSB1cGRhdGVkOiAke09iamVjdC5rZXlzKGNhY2hlKS5sZW5ndGh9IGZsYWdzYCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coYGZldGNoIGVycm9yOmAsIGVycm9yKTtcbiAgICAgIGlmICghY2FjaGUpIGNhY2hlID0ge307XG4gICAgICBpZiAoY2FjaGUpIGxhc3RGZXRjaCA9IG5vdztcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZXRCb29sZWFuKGtleTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuIHwgbnVsbD4ge1xuICAgIGF3YWl0IGVuc3VyZUNhY2hlKCk7XG4gICAgY29uc3QgdiA9IGNhY2hlPy5ba2V5XTtcbiAgICBpZiAodiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQpIHJldHVybiBudWxsO1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpIHJldHVybiB2O1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKHYgPT09IFwidHJ1ZVwiKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh2ID09PSBcImZhbHNlXCIpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZXRTdHJpbmcoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICBhd2FpdCBlbnN1cmVDYWNoZSgpO1xuICAgIGNvbnN0IHYgPSBjYWNoZT8uW2tleV07XG4gICAgaWYgKHYgPT09IG51bGwgfHwgdiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHJldHVybiB2O1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0TnVtYmVyKGtleTogc3RyaW5nKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgYXdhaXQgZW5zdXJlQ2FjaGUoKTtcbiAgICBjb25zdCB2ID0gY2FjaGU/LltrZXldO1xuICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSByZXR1cm4gdjtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IG4gPSBOdW1iZXIodik7XG4gICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG4pID8gbiA6IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0SlNPTjxUID0gdW5rbm93bj4oa2V5OiBzdHJpbmcpOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gICAgYXdhaXQgZW5zdXJlQ2FjaGUoKTtcbiAgICBjb25zdCB2ID0gY2FjaGU/LltrZXldO1xuICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHR5cGVvZiB2ID09PSBcIm9iamVjdFwiKSByZXR1cm4gdiBhcyBUO1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodikgYXMgVDtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZXRNYW55KGtleXM6IHN0cmluZ1tdKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICAgIGF3YWl0IGVuc3VyZUNhY2hlKCk7XG4gICAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICBvdXRba10gPSBjYWNoZT8uW2tdID8/IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICByZXR1cm4geyBnZXRCb29sZWFuLCBnZXRTdHJpbmcsIGdldE51bWJlciwgZ2V0SlNPTiwgZ2V0TWFueSB9O1xufVxuXG4iXSwibmFtZXMiOlsicHJlZml4IiwibmV3Q2FjaGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/../../dist/chunk-7Z4WROQP.js\n");

/***/ }),

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var notion_edge_flags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! notion-edge-flags */ \"(middleware)/../../dist/chunk-7Z4WROQP.js\");\n\n\nasync function middleware(req) {\n    const flags = (0,notion_edge_flags__WEBPACK_IMPORTED_MODULE_1__.createFlagsClient)();\n    const on = await flags.getBoolean('checkoutRedesign');\n    if (on && new URL(req.url).pathname === '/old') {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', req.url));\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDVztBQUUvQyxlQUFlRSxXQUFXQyxHQUFZO0lBQzNDLE1BQU1DLFFBQVFILG9FQUFpQkE7SUFDL0IsTUFBTUksS0FBSyxNQUFNRCxNQUFNRSxVQUFVLENBQUM7SUFDbEMsSUFBSUQsTUFBTSxJQUFJRSxJQUFJSixJQUFJSyxHQUFHLEVBQUVDLFFBQVEsS0FBSyxRQUFRO1FBQzlDLE9BQU9ULHFEQUFZQSxDQUFDVSxRQUFRLENBQUMsSUFBSUgsSUFBSSxLQUFLSixJQUFJSyxHQUFHO0lBQ25EO0lBQ0EsT0FBT1IscURBQVlBLENBQUNXLElBQUk7QUFDMUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy95YWhvcmJhcmtvdXNraS90aGVuZXR3b3JrL2VkZ2UtZmVhdHVyZS1mbGFncy9leGFtcGxlcy9uZXh0anMtbGl2ZS9taWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGNyZWF0ZUZsYWdzQ2xpZW50IH0gZnJvbSAnbm90aW9uLWVkZ2UtZmxhZ3MnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXE6IFJlcXVlc3QpIHtcbiAgY29uc3QgZmxhZ3MgPSBjcmVhdGVGbGFnc0NsaWVudCgpO1xuICBjb25zdCBvbiA9IGF3YWl0IGZsYWdzLmdldEJvb2xlYW4oJ2NoZWNrb3V0UmVkZXNpZ24nKTtcbiAgaWYgKG9uICYmIG5ldyBVUkwocmVxLnVybCkucGF0aG5hbWUgPT09ICcvb2xkJykge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnLycsIHJlcS51cmwpKTtcbiAgfVxuICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbn1cblxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUZsYWdzQ2xpZW50IiwibWlkZGxld2FyZSIsInJlcSIsImZsYWdzIiwib24iLCJnZXRCb29sZWFuIiwiVVJMIiwidXJsIiwicGF0aG5hbWUiLCJyZWRpcmVjdCIsIm5leHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});