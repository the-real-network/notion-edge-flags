"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/../../dist/chunk-YHNRUADK.js":
/*!************************************!*\
  !*** ../../dist/chunk-YHNRUADK.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFlagsClient: () => (/* binding */ createFlagsClient)\n/* harmony export */ });\n/* harmony import */ var _chunk_B67M3F4I_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-B67M3F4I.js */ \"(middleware)/../../dist/chunk-B67M3F4I.js\");\n/* harmony import */ var _vercel_edge_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/edge-config */ \"(middleware)/../../node_modules/@vercel/edge-config/dist/index.js\");\n\n// src/core/client.ts\n\nfunction createFetchConnection(opts) {\n    const base = opts.edgeConfigId ? `https://api.vercel.com/v1/edge-config/${opts.edgeConfigId}` : `https://api.vercel.com/v1/edge-config`;\n    const token = opts.edgeConfigToken ?? process.env.VERCEL_API_TOKEN ?? \"\";\n    async function getItem(key) {\n        const search = new URLSearchParams();\n        search.set(\"keys\", JSON.stringify([\n            key\n        ]));\n        if (opts.teamId ?? process.env.VERCEL_TEAM_ID) search.set(\"teamId\", opts.teamId ?? process.env.VERCEL_TEAM_ID);\n        const url = `${base}/items?${search.toString()}`;\n        const res = await fetch(url, {\n            headers: token ? {\n                Authorization: `Bearer ${token}`\n            } : void 0,\n            cache: \"no-store\"\n        });\n        if (!res.ok) return null;\n        const data = await res.json();\n        const found = data?.find((i)=>i.key === key)?.value;\n        return found ?? null;\n    }\n    async function getMany(keys) {\n        if (keys.length === 0) return {};\n        const search = new URLSearchParams();\n        search.set(\"keys\", JSON.stringify(keys));\n        if (opts.teamId ?? process.env.VERCEL_TEAM_ID) search.set(\"teamId\", opts.teamId ?? process.env.VERCEL_TEAM_ID);\n        const url = `${base}/items?${search.toString()}`;\n        const res = await fetch(url, {\n            headers: token ? {\n                Authorization: `Bearer ${token}`\n            } : void 0,\n            cache: \"no-store\"\n        });\n        if (!res.ok) return {};\n        const data = await res.json();\n        const out = {};\n        for (const k of keys)out[k] = null;\n        for (const it of data ?? []){\n            if (keys.includes(it.key)) {\n                out[it.key] = it.value;\n            }\n        }\n        return out;\n    }\n    return {\n        getItem,\n        getMany\n    };\n}\nfunction createFlagsClient(options = {}) {\n    const namespace = options.namespace ?? \"flag\";\n    const env = (0,_chunk_B67M3F4I_js__WEBPACK_IMPORTED_MODULE_0__.resolveEnvironment)(options.env ?? null);\n    const edgeConfigConnection = process.env.EDGE_CONFIG;\n    const edgeConfig = options.connection ? null : edgeConfigConnection ? (0,_vercel_edge_config__WEBPACK_IMPORTED_MODULE_1__.createClient)(edgeConfigConnection) : null;\n    let cache = null;\n    const cacheExpiry = 3e4;\n    let lastFetch = 0;\n    async function ensureCache() {\n        const now = Date.now();\n        const cacheAge = cache ? now - lastFetch : -1;\n        console.log(`cache check: age=${cacheAge}ms expiry=${cacheExpiry}ms hasCache=${!!cache} willFetch=${!cache || cacheAge >= cacheExpiry}`);\n        if (cache && cacheAge < cacheExpiry) return;\n        try {\n            if (edgeConfig) {\n                console.log(`fetching via SDK: env=${env}`);\n                const prefix2 = `${namespace}__${env}__`;\n                const allItems = await edgeConfig.getAll();\n                console.log(`SDK success: total=${Object.keys(allItems ?? {}).length} items`);\n                const newCache2 = {};\n                for (const [key, value] of Object.entries(allItems ?? {})){\n                    if (key.startsWith(prefix2)) {\n                        const shortKey = key.slice(prefix2.length);\n                        newCache2[shortKey] = value;\n                        console.log(`cached via SDK: ${shortKey} = ${JSON.stringify(value)}`);\n                    }\n                }\n                cache = newCache2;\n                lastFetch = now;\n                console.log(`SDK cache updated: ${Object.keys(cache).length} flags`);\n                return;\n            }\n            console.log(`falling back to REST API`);\n            const connection = createFetchConnection({\n                edgeConfigId,\n                edgeConfigToken: options.edgeConfigToken ?? process.env.VERCEL_API_TOKEN,\n                teamId: options.teamId ?? process.env.VERCEL_TEAM_ID\n            });\n            const prefix = `${namespace}__${env}__`;\n            const keys = Object.keys(cache ?? {}).map((k)=>`${prefix}${k}`);\n            if (keys.length === 0) {\n                cache = {};\n                lastFetch = now;\n                return;\n            }\n            const values = await connection.getMany(keys);\n            const newCache = {};\n            for (const [fullKey, value] of Object.entries(values)){\n                if (fullKey.startsWith(prefix)) {\n                    const shortKey = fullKey.slice(prefix.length);\n                    newCache[shortKey] = value;\n                }\n            }\n            cache = newCache;\n            lastFetch = now;\n            console.log(`REST cache updated: ${Object.keys(cache).length} flags`);\n        } catch (error) {\n            console.log(`fetch error:`, error);\n            if (!cache) cache = {};\n            if (cache) lastFetch = now;\n        }\n    }\n    async function getBoolean(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"boolean\") return v;\n        if (typeof v === \"string\") {\n            if (v === \"true\") return true;\n            if (v === \"false\") return false;\n        }\n        return null;\n    }\n    async function getString(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"string\") return v;\n        return null;\n    }\n    async function getNumber(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"number\") return v;\n        if (typeof v === \"string\") {\n            const n = Number(v);\n            return Number.isFinite(n) ? n : null;\n        }\n        return null;\n    }\n    async function getJSON(key) {\n        await ensureCache();\n        const v = cache?.[key];\n        if (v === null || v === void 0) return null;\n        if (typeof v === \"object\") return v;\n        if (typeof v === \"string\") {\n            try {\n                return JSON.parse(v);\n            } catch  {\n                return null;\n            }\n        }\n        return null;\n    }\n    async function getMany(keys) {\n        await ensureCache();\n        const out = {};\n        for (const k of keys){\n            out[k] = cache?.[k] ?? null;\n        }\n        return out;\n    }\n    return {\n        getBoolean,\n        getString,\n        getNumber,\n        getJSON,\n        getMany\n    };\n}\n //# sourceMappingURL=chunk-YHNRUADK.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4uLy4uL2Rpc3QvY2h1bmstWUhOUlVBREsuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFNkI7QUFFN0IsU0FBUyxzQkFBc0IsTUFBa0c7SUFDL0gsTUFBTSxPQUFPLEtBQUssZUFDZCx5Q0FBeUMsS0FBSyxZQUFZLEtBQzFEO0lBQ0osTUFBTSxRQUFRLEtBQUssbUJBQW1CLFFBQVEsSUFBSSxvQkFBb0I7SUFDdEUsZUFBZSxRQUFRLEtBQStCO1FBQ3BELE1BQU0sU0FBUyxJQUFJLGdCQUFnQjtRQUNuQyxPQUFPLElBQUksUUFBUSxLQUFLLFVBQVU7WUFBQyxHQUFHO1NBQUMsQ0FBQztRQUN4QyxJQUFJLEtBQUssVUFBVSxRQUFRLElBQUksZUFBZ0IsUUFBTyxJQUFJLFVBQVcsS0FBSyxVQUFVLFFBQVEsSUFBSSxjQUF5QjtRQUN6SCxNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsT0FBTyxTQUFTLENBQUM7UUFDOUMsTUFBTSxNQUFNLE1BQU0sTUFBTSxLQUFLO1lBQzNCLFNBQVMsUUFBUTtnQkFBRSxlQUFlLFVBQVUsS0FBSztZQUFHLElBQUk7WUFDeEQsT0FBTztRQUNULENBQUM7UUFDRCxJQUFJLENBQUMsSUFBSSxHQUFJLFFBQU87UUFDcEIsTUFBTSxPQUFRLE1BQU0sSUFBSSxLQUFLO1FBQzdCLE1BQU0sUUFBUSxNQUFNLEtBQUssQ0FBQyxJQUFNLEVBQUUsUUFBUSxHQUFHLEdBQUc7UUFDaEQsT0FBTyxTQUFTO0lBQ2xCO0lBQ0EsZUFBZSxRQUFRLE1BQWtEO1FBQ3ZFLElBQUksS0FBSyxXQUFXLEVBQUcsUUFBTyxDQUFDO1FBQy9CLE1BQU0sU0FBUyxJQUFJLGdCQUFnQjtRQUNuQyxPQUFPLElBQUksUUFBUSxLQUFLLFVBQVUsSUFBSSxDQUFDO1FBQ3ZDLElBQUksS0FBSyxVQUFVLFFBQVEsSUFBSSxlQUFnQixRQUFPLElBQUksVUFBVyxLQUFLLFVBQVUsUUFBUSxJQUFJLGNBQXlCO1FBQ3pILE1BQU0sTUFBTSxHQUFHLElBQUks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O1FBQ2xFLE1BQU0sWUFBWTtRQUNsQixNQUFNLElBQUksUUFBUSxHQUFHO1FBQ3JCLElBQUksTUFBTSxRQUFRLE1BQU0sT0FBVyxRQUFPO1FBQzFDLElBQUksT0FBTyxNQUFNLFNBQVUsUUFBTztRQUNsQyxJQUFJLE9BQU8sTUFBTSxVQUFVO1lBQ3pCLElBQUk7Z0JBQ0YsT0FBTyxLQUFLLE1BQU0sQ0FBQztZQUNyQixTQUFRO2dCQUNOLE9BQU87WUFDVDtRQUNGO1FBQ0EsT0FBTztJQUNUO0lBRUEsZUFBZSxRQUFRLE1BQWtEO1FBQ3ZFLE1BQU0sWUFBWTtRQUNsQixNQUFNLE1BQStCLENBQUM7UUFDdEMsV0FBVyxLQUFLLEtBQU07WUFDcEIsSUFBSSxDQUFDLElBQUksUUFBUSxDQUFDLEtBQUs7UUFDekI7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxPQUFPO1FBQUU7UUFBWTtRQUFXO1FBQVc7UUFBUztJQUFRO0FBQzlEIiwic291cmNlcyI6WyIvVXNlcnMveWFob3JiYXJrb3Vza2kvdGhlbmV0d29yay9lZGdlLWZlYXR1cmUtZmxhZ3MvZXhhbXBsZXMvc3JjL2NvcmUvY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlc29sdmVFbnZpcm9ubWVudCwgZm9ybWF0TmFtZXNwYWNlZEtleSB9IGZyb20gXCIuLi91dGlscy9lbnZcIjtcbmltcG9ydCB0eXBlIHsgRWRnZUNvbmZpZ0Nvbm5lY3Rpb24sIEZsYWdzQ2xpZW50T3B0aW9ucyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHZlcmNlbC9lZGdlLWNvbmZpZ1wiO1xuXG5mdW5jdGlvbiBjcmVhdGVGZXRjaENvbm5lY3Rpb24ob3B0czogeyBlZGdlQ29uZmlnSWQ/OiBzdHJpbmc7IGVkZ2VDb25maWdUb2tlbj86IHN0cmluZzsgdGVhbUlkPzogc3RyaW5nIH0pOiBFZGdlQ29uZmlnQ29ubmVjdGlvbiB7XG4gIGNvbnN0IGJhc2UgPSBvcHRzLmVkZ2VDb25maWdJZFxuICAgID8gYGh0dHBzOi8vYXBpLnZlcmNlbC5jb20vdjEvZWRnZS1jb25maWcvJHtvcHRzLmVkZ2VDb25maWdJZH1gXG4gICAgOiBgaHR0cHM6Ly9hcGkudmVyY2VsLmNvbS92MS9lZGdlLWNvbmZpZ2A7XG4gIGNvbnN0IHRva2VuID0gb3B0cy5lZGdlQ29uZmlnVG9rZW4gPz8gcHJvY2Vzcy5lbnYuVkVSQ0VMX0FQSV9UT0tFTiA/PyBcIlwiO1xuICBhc3luYyBmdW5jdGlvbiBnZXRJdGVtKGtleTogc3RyaW5nKTogUHJvbWlzZTx1bmtub3duPiB7XG4gICAgY29uc3Qgc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgIHNlYXJjaC5zZXQoXCJrZXlzXCIsIEpTT04uc3RyaW5naWZ5KFtrZXldKSk7XG4gICAgaWYgKG9wdHMudGVhbUlkID8/IHByb2Nlc3MuZW52LlZFUkNFTF9URUFNX0lEKSBzZWFyY2guc2V0KFwidGVhbUlkXCIsIChvcHRzLnRlYW1JZCA/PyBwcm9jZXNzLmVudi5WRVJDRUxfVEVBTV9JRCkgYXMgc3RyaW5nKTtcbiAgICBjb25zdCB1cmwgPSBgJHtiYXNlfS9pdGVtcz8ke3NlYXJjaC50b1N0cmluZygpfWA7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBoZWFkZXJzOiB0b2tlbiA/IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSA6IHVuZGVmaW5lZCxcbiAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCJcbiAgICB9KTtcbiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogdW5rbm93biB9PjtcbiAgICBjb25zdCBmb3VuZCA9IGRhdGE/LmZpbmQoKGkpID0+IGkua2V5ID09PSBrZXkpPy52YWx1ZTtcbiAgICByZXR1cm4gZm91bmQgPz8gbnVsbDtcbiAgfVxuICBhc3luYyBmdW5jdGlvbiBnZXRNYW55KGtleXM6IHN0cmluZ1tdKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICBzZWFyY2guc2V0KFwia2V5c1wiLCBKU09OLnN0cmluZ2lmeShrZXlzKSk7XG4gICAgaWYgKG9wdHMudGVhbUlkID8/IHByb2Nlc3MuZW52LlZFUkNFTF9URUFNX0lEKSBzZWFyY2guc2V0KFwidGVhbUlkXCIsIChvcHRzLnRlYW1JZCA/PyBwcm9jZXNzLmVudi5WRVJDRUxfVEVBTV9JRCkgYXMgc3RyaW5nKTtcbiAgICBjb25zdCB1cmwgPSBgJHtiYXNlfS9pdGVtcz8ke3NlYXJjaC50b1N0cmluZygpfWA7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBoZWFkZXJzOiB0b2tlbiA/IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSA6IHVuZGVmaW5lZCxcbiAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCJcbiAgICB9KTtcbiAgICBpZiAoIXJlcy5vaykgcmV0dXJuIHt9O1xuICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHVua25vd24gfT47XG4gICAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSBvdXRba10gPSBudWxsO1xuICAgIGZvciAoY29uc3QgaXQgb2YgZGF0YSA/PyBbXSkge1xuICAgICAgaWYgKGtleXMuaW5jbHVkZXMoaXQua2V5KSkge1xuICAgICAgICBvdXRbaXQua2V5XSA9IGl0LnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIHJldHVybiB7IGdldEl0ZW0sIGdldE1hbnkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZsYWdzQ2xpZW50KG9wdGlvbnM6IEZsYWdzQ2xpZW50T3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IG5hbWVzcGFjZSA9IG9wdGlvbnMubmFtZXNwYWNlID8/IFwiZmxhZ1wiO1xuICBjb25zdCBlbnYgPSByZXNvbHZlRW52aXJvbm1lbnQob3B0aW9ucy5lbnYgPz8gbnVsbCk7XG4gIGNvbnN0IGVkZ2VDb25maWdDb25uZWN0aW9uID0gcHJvY2Vzcy5lbnYuRURHRV9DT05GSUc7XG4gIFxuICBjb25zdCBlZGdlQ29uZmlnID0gb3B0aW9ucy5jb25uZWN0aW9uID8gbnVsbCA6IChlZGdlQ29uZmlnQ29ubmVjdGlvbiA/IGNyZWF0ZUNsaWVudChlZGdlQ29uZmlnQ29ubmVjdGlvbikgOiBudWxsKTtcblxuICBsZXQgY2FjaGU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCA9IG51bGw7XG4gIGNvbnN0IGNhY2hlRXhwaXJ5ID0gMzAwMDA7XG4gIGxldCBsYXN0RmV0Y2ggPSAwO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUNhY2hlKCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgY2FjaGVBZ2UgPSBjYWNoZSA/IG5vdyAtIGxhc3RGZXRjaCA6IC0xO1xuICAgIGNvbnNvbGUubG9nKGBjYWNoZSBjaGVjazogYWdlPSR7Y2FjaGVBZ2V9bXMgZXhwaXJ5PSR7Y2FjaGVFeHBpcnl9bXMgaGFzQ2FjaGU9JHshIWNhY2hlfSB3aWxsRmV0Y2g9JHshY2FjaGUgfHwgY2FjaGVBZ2UgPj0gY2FjaGVFeHBpcnl9YCk7XG4gICAgaWYgKGNhY2hlICYmIGNhY2hlQWdlIDwgY2FjaGVFeHBpcnkpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKGVkZ2VDb25maWcpIHtcbiAgICAgICAgY29uc29sZS5sb2coYGZldGNoaW5nIHZpYSBTREs6IGVudj0ke2Vudn1gKTtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gYCR7bmFtZXNwYWNlfV9fJHtlbnZ9X19gO1xuICAgICAgICBjb25zdCBhbGxJdGVtcyA9IGF3YWl0IGVkZ2VDb25maWcuZ2V0QWxsKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBTREsgc3VjY2VzczogdG90YWw9JHtPYmplY3Qua2V5cyhhbGxJdGVtcyA/PyB7fSkubGVuZ3RofSBpdGVtc2ApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV3Q2FjaGU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFsbEl0ZW1zID8/IHt9KSkge1xuICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICAgICAgICBjb25zdCBzaG9ydEtleSA9IGtleS5zbGljZShwcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgICAgIG5ld0NhY2hlW3Nob3J0S2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYGNhY2hlZCB2aWEgU0RLOiAke3Nob3J0S2V5fSA9ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY2FjaGUgPSBuZXdDYWNoZTtcbiAgICAgICAgbGFzdEZldGNoID0gbm93O1xuICAgICAgICBjb25zb2xlLmxvZyhgU0RLIGNhY2hlIHVwZGF0ZWQ6ICR7T2JqZWN0LmtleXMoY2FjaGUpLmxlbmd0aH0gZmxhZ3NgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgZmFsbGluZyBiYWNrIHRvIFJFU1QgQVBJYCk7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gY3JlYXRlRmV0Y2hDb25uZWN0aW9uKHtcbiAgICAgICAgZWRnZUNvbmZpZ0lkLFxuICAgICAgICBlZGdlQ29uZmlnVG9rZW46IG9wdGlvbnMuZWRnZUNvbmZpZ1Rva2VuID8/IHByb2Nlc3MuZW52LlZFUkNFTF9BUElfVE9LRU4sXG4gICAgICAgIHRlYW1JZDogb3B0aW9ucy50ZWFtSWQgPz8gcHJvY2Vzcy5lbnYuVkVSQ0VMX1RFQU1fSURcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBwcmVmaXggPSBgJHtuYW1lc3BhY2V9X18ke2Vudn1fX2A7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY2FjaGUgPz8ge30pLm1hcChrID0+IGAke3ByZWZpeH0ke2t9YCk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY2FjaGUgPSB7fTtcbiAgICAgICAgbGFzdEZldGNoID0gbm93O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IGNvbm5lY3Rpb24uZ2V0TWFueShrZXlzKTtcbiAgICAgIGNvbnN0IG5ld0NhY2hlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuICAgICAgZm9yIChjb25zdCBbZnVsbEtleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlcykpIHtcbiAgICAgICAgaWYgKGZ1bGxLZXkuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICAgICAgY29uc3Qgc2hvcnRLZXkgPSBmdWxsS2V5LnNsaWNlKHByZWZpeC5sZW5ndGgpO1xuICAgICAgICAgIG5ld0NhY2hlW3Nob3J0S2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNhY2hlID0gbmV3Q2FjaGU7XG4gICAgICBsYXN0RmV0Y2ggPSBub3c7XG4gICAgICBjb25zb2xlLmxvZyhgUkVTVCBjYWNoZSB1cGRhdGVkOiAke09iamVjdC5rZXlzKGNhY2hlKS5sZW5ndGh9IGZsYWdzYCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coYGZldGNoIGVycm9yOmAsIGVycm9yKTtcbiAgICAgIGlmICghY2FjaGUpIGNhY2hlID0ge307XG4gICAgICBpZiAoY2FjaGUpIGxhc3RGZXRjaCA9IG5vdztcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZXRCb29sZWFuKGtleTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuIHwgbnVsbD4ge1xuICAgIGF3YWl0IGVuc3VyZUNhY2hlKCk7XG4gICAgY29uc3QgdiA9IGNhY2hlPy5ba2V5XTtcbiAgICBpZiAodiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQpIHJldHVybiBudWxsO1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpIHJldHVybiB2O1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKHYgPT09IFwidHJ1ZVwiKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh2ID09PSBcImZhbHNlXCIpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZXRTdHJpbmcoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICBhd2FpdCBlbnN1cmVDYWNoZSgpO1xuICAgIGNvbnN0IHYgPSBjYWNoZT8uW2tleV07XG4gICAgaWYgKHYgPT09IG51bGwgfHwgdiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHJldHVybiB2O1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0TnVtYmVyKGtleTogc3RyaW5nKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgYXdhaXQgZW5zdXJlQ2FjaGUoKTtcbiAgICBjb25zdCB2ID0gY2FjaGU/LltrZXldO1xuICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSByZXR1cm4gdjtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IG4gPSBOdW1iZXIodik7XG4gICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG4pID8gbiA6IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0SlNPTjxUID0gdW5rbm93bj4oa2V5OiBzdHJpbmcpOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gICAgYXdhaXQgZW5zdXJlQ2FjaGUoKTtcbiAgICBjb25zdCB2ID0gY2FjaGU/LltrZXldO1xuICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHR5cGVvZiB2ID09PSBcIm9iamVjdFwiKSByZXR1cm4gdiBhcyBUO1xuICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodikgYXMgVDtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBnZXRNYW55KGtleXM6IHN0cmluZ1tdKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICAgIGF3YWl0IGVuc3VyZUNhY2hlKCk7XG4gICAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICBvdXRba10gPSBjYWNoZT8uW2tdID8/IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICByZXR1cm4geyBnZXRCb29sZWFuLCBnZXRTdHJpbmcsIGdldE51bWJlciwgZ2V0SlNPTiwgZ2V0TWFueSB9O1xufVxuXG4iXSwibmFtZXMiOlsicHJlZml4IiwibmV3Q2FjaGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/../../dist/chunk-YHNRUADK.js\n");

/***/ }),

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var notion_edge_flags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! notion-edge-flags */ \"(middleware)/../../dist/chunk-YHNRUADK.js\");\n\n\nasync function middleware(req) {\n    const flags = (0,notion_edge_flags__WEBPACK_IMPORTED_MODULE_1__.createFlagsClient)();\n    const on = await flags.getBoolean('checkoutRedesign');\n    if (on && new URL(req.url).pathname === '/old') {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', req.url));\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDVztBQUUvQyxlQUFlRSxXQUFXQyxHQUFZO0lBQzNDLE1BQU1DLFFBQVFILG9FQUFpQkE7SUFDL0IsTUFBTUksS0FBSyxNQUFNRCxNQUFNRSxVQUFVLENBQUM7SUFDbEMsSUFBSUQsTUFBTSxJQUFJRSxJQUFJSixJQUFJSyxHQUFHLEVBQUVDLFFBQVEsS0FBSyxRQUFRO1FBQzlDLE9BQU9ULHFEQUFZQSxDQUFDVSxRQUFRLENBQUMsSUFBSUgsSUFBSSxLQUFLSixJQUFJSyxHQUFHO0lBQ25EO0lBQ0EsT0FBT1IscURBQVlBLENBQUNXLElBQUk7QUFDMUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy95YWhvcmJhcmtvdXNraS90aGVuZXR3b3JrL2VkZ2UtZmVhdHVyZS1mbGFncy9leGFtcGxlcy9uZXh0anMtbGl2ZS9taWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGNyZWF0ZUZsYWdzQ2xpZW50IH0gZnJvbSAnbm90aW9uLWVkZ2UtZmxhZ3MnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXE6IFJlcXVlc3QpIHtcbiAgY29uc3QgZmxhZ3MgPSBjcmVhdGVGbGFnc0NsaWVudCgpO1xuICBjb25zdCBvbiA9IGF3YWl0IGZsYWdzLmdldEJvb2xlYW4oJ2NoZWNrb3V0UmVkZXNpZ24nKTtcbiAgaWYgKG9uICYmIG5ldyBVUkwocmVxLnVybCkucGF0aG5hbWUgPT09ICcvb2xkJykge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnLycsIHJlcS51cmwpKTtcbiAgfVxuICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbn1cblxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUZsYWdzQ2xpZW50IiwibWlkZGxld2FyZSIsInJlcSIsImZsYWdzIiwib24iLCJnZXRCb29sZWFuIiwiVVJMIiwidXJsIiwicGF0aG5hbWUiLCJyZWRpcmVjdCIsIm5leHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});